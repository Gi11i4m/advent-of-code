<html>
  <head>
    <title>AoC</title>
    <meta
      name="description"
      content="Advent of Code 2022 solutions by Gilliam"
    />
    <meta name="author" content="Gi11i4m" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="./assets/favicon.png" />

    <script src="https://unpkg.com/browser-cjs/require.js"></script>
    <link rel="stylesheet" href="./assets/index.css" />
  </head>
  <body>
    <img src="./assets/aoc-banner.jpeg" />

    <div id="aoc-container">
      <div>
        <select name="days" id="days">
          {{DAY_OPTIONS}}
        </select>
        <a id="code-url" target="_blank"><code>Code</code></a>
      </div>

      <textarea id="input" placeholder="Input"></textarea>

      <span id="answer"></span>
    </div>

    <script>
      function getDay() {
        return document.getElementById('days').value;
      }

      function getInput() {
        return document.getElementById('input').value;
      }

      function runDay() {
        let result = 'No answer found for this input!';

        try {
          result = require(`./${getDay()}/index.js`).run(getInput());
        } catch (e) {}

        document.getElementById('answer').innerText = result;
      }

      function addSourceCodeUrl() {
        document
          .getElementById('code-url')
          .setAttribute(
            'href',
            `https://github.com/Gi11i4m/advent-of-code/blob/master/2022/src/${getDay()}/index.ts`
          );
      }

      function init() {
        runDay(getInput());
        addSourceCodeUrl();
      }

      init();

      document
        .getElementById('days')
        .addEventListener('input', ({ target: { value } }) => {
          runDay(getInput());
          addSourceCodeUrl();
        });

      document
        .getElementById('input')
        .addEventListener('input', () => runDay(getInput()));
    </script>
  </body>
</html>
